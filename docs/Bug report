# Ошибка 500 при удалении задачи с несуществующим индексом

**ID:** BUG-001  
**Описание:** При попытке удалить задачу с индексом, превышающим длину списка задач, сервер возвращает ошибку 500 (Internal Server Error). Это происходит из-за отсутствия проверки валидности индекса в методе delete_todo.  
**Окружение:**  
- URL: https://davidchamytodo.onrender.com  
- Платформа: Render (Free Tier)  
- Репозиторий: github.com/Davidchastr/todo-list  
- Браузер: Яндекс Браузер Версия 25.2.2.834 (64-bit)  
**Шаги воспроизведения:**  
- Открыть сайт https://davidchamytodo.onrender.com.  
- Добавить одну задачу (например, "Тест", категория "Работа", приоритет "Высокий").  
- В адресной строке ввести https://davidchamytodo.onrender.com/delete/999 и нажать Enter.  
**Фактический результат:**  
Сервер возвращает страницу с ошибкой:  
Internal Server Error
The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.

text

Свернуть

Перенос

Копировать
В логах Render появляется сообщение об исключении IndexError: pop index out of range.  
**Ожидаемый результат:**  
Пользователь перенаправляется на главную страницу (https://davidchamytodo.onrender.com/), список задач остается без изменений, ошибка не отображается.  
**Приоритет:**  
Средний: Ошибка не затрагивает типичное использование через интерфейс (кнопка "✗" отправляет корректные индексы).  
Однако уязвимость к некорректным запросам снижает надежность приложения и может быть использована для тестирования на уязвимости.  
**Серьезность:**  
Низкая: Ошибка не приводит к потере данных или нарушению функциональности для обычных пользователей, но портит впечатление при нестандартных запросах.

---

# Приоритет задачи не обновляется при редактировании

**ID:** BUG-002  
**Описание:**  
При редактировании задачи через форму редактирования изменение приоритета не сохраняется. После выбора нового приоритета и сохранения задача сохраняет старое значение приоритета, хотя текст и категория обновляются корректно.  
**Окружение:**  
- URL: https://davidchamytodo.onrender.com  
- Платформа: Render (Free Tier)  
- Репозиторий: github.com/Davidchastr/todo-list  
- Браузер: Яндекс Браузер Версия 25.2.2.834 (64-bit)  
**Шаги воспроизведения:**  
- Открыть сайт https://davidchamytodo.onrender.com.  
- Добавить задачу:  
  - Текст: "Позвонить другу".  
  - Категория: "Личное".  
  - Приоритет: "Средний".  
  - Нажать "Добавить".  
- Нажать кнопку "✎" рядом с задачей "[Личное] Позвонить другу (Приоритет: Средний)".  
- В форме редактирования:  
  - Оставить текст "Позвонить другу" или изменить его.  
  - Изменить категорию на "Срочное".  
  - Изменить приоритет на "Высокий".  
  - Нажать "Сохранить".  
**Фактический результат:**  
После сохранения задача отображается как "[Срочное] Позвонить другу (Приоритет: Средний)".  
Приоритет остается "Средний", хотя был выбран "Высокий".  
**Ожидаемый результат:**  
Задача должна обновиться до "[Срочное] Позвонить другу (Приоритет: Высокий)".  
Выбранный приоритет ("Высокий") должен сохраниться.  
**Воспроизводимость:**  
Всегда (100% воспроизводится при указанных шагах).  
**Приоритет:**  
Средний:  
Ошибка влияет на функциональность редактирования, но не критично для базового использования (добавление/удаление задач работает).  
Пользователь может быть сбит с толку, так как выбор приоритета в форме не имеет эффекта.  
**Серьезность:**  
Средняя: Ошибка нарушает ожидаемое поведение редактирования, но не приводит к потере данных или полной неработоспособности.

---

# XSS-уязвимость при добавлении задачи

**ID:** BUG-011  
**Название:** Выполнение JavaScript-кода при добавлении задачи (XSS)  
**Описание:** При вводе HTML-тегов в поле ввода задачи браузер интерпретирует их как код, что позволяет выполнить произвольный JavaScript.  
**Шаги для воспроизведения:**  
- Открыть сайт https://davidchamytodo.onrender.com  
- Ввести в поле задачи: <script>alert("test")</script>.  
- Выбрать категорию "Срочное".  
- Выбрать приоритет "Высокий".  
- Нажать "Добавить".  
**Ожидаемый результат:**  
Текст должен отобразиться как [Срочное] <script>alert("test")</script> (Приоритет: Высокий), без выполнения скрипта.  
**Фактический результат:**  
Скрипт выполняется, появляется всплывающее окно с текстом "test" (XSS-уязвимость).  
**Окружение:**  
- URL: https://davidchamytodo.onrender.com  
- Платформа: Render (Free Tier)  
- Репозиторий: github.com/Davidchastr/todo-list  
- Браузер: Яндекс Браузер Версия 25.2.2.834 (64-bit)  
**Приоритет:** Высокий (уязвимость безопасности)  
**Статус:** Открыт

---

# Стили приоритетов не применяются из-за несоответствия CSS-классов

**ID:** TC-015  
**Описание:**  
При добавлении задач с разными приоритетами ("Высокий", "Средний", "Низкий") ожидаемые CSS-стили для цветового оформления фона не применяются. Проблема связана с несоответствием между значениями приоритетов в данных и названиями CSS-классов в шаблоне.  
**Окружение:**  
- URL: https://davidchamytodo.onrender.com  
- Платформа: Render (Free Tier)  
- Репозиторий: github.com/Davidchastr/todo-list  
- Браузер: Яндекс Браузер Версия 25.2.2.834 (64-bit)  
**Шаги для воспроизведения:**  
- Открыть сайт https://davidchamytodo.onrender.com/  
- Добавить задачу:  
  - Название: "Тест высокий"  
  - Приоритет: "Высокий"  
- Добавить задачу:  
  - Название: "Тест средний"  
  - Приоритет: "Средний"  
- Добавить задачу:  
  - Название: "Тест низкий"  
  - Приоритет: "Низкий"  
- Проверить отображение задач на главной странице.  
**Ожидаемый результат:**  
Задача с приоритетом "Высокий" отображается с красным фоном (.high { background-color: #ffcccc; }).  
Задача с приоритетом "Средний" отображается с жёлтым фоном (.medium { background-color: #fff3cc; }).  
Задача с приоритетом "Низкий" отображается с зелёным фоном (.low { background-color: #e6ffe6; }).  
**Фактический результат:**  
Стили приоритетов не применяются. Все задачи отображаются без цветового фона или с некорректным стилем из-за несоответствия значений приоритетов в данных (Высокий, Средний, Низкий) и CSS-классов (.high, .medium, .low).  
**Серьёзность:** Средняя (Medium)  
**Приоритет:** Средний (P2)
